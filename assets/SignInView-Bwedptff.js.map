{"version":3,"file":"SignInView-Bwedptff.js","sources":["../../src/views/auth/SignInView.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { reactive, computed } from \"vue\";\r\nimport { useTemplateStore } from \"@/stores/template\";\r\n\r\n// Vuelidate, for more info and examples you can check out https://github.com/vuelidate/vuelidate\r\nimport useVuelidate from \"@vuelidate/core\";\r\nimport { required, minLength, email } from \"@vuelidate/validators\";\r\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport onPageError from \"@/router/error\";\r\nimport type { FirebaseError } from \"firebase/app\";\r\n\r\n// Main store and Router\r\nconst template = useTemplateStore();\r\n\r\n// Input state variables\r\nconst state = reactive({\r\n\temail: null,\r\n\tpassword: null,\r\n\terrorMessage: ''\r\n});\r\n\r\n// Validation rules\r\nconst rules = computed(() => {\r\n\treturn {\r\n\t\temail: {\r\n\t\t\trequired,\r\n\t\t\temail,\r\n\t\t\tminLength: minLength(3),\r\n\t\t},\r\n\t\tpassword: {\r\n\t\t\trequired,\r\n\t\t\tminLength: minLength(5),\r\n\t\t},\r\n\t};\r\n});\r\n\r\n// Use vuelidate\r\nconst v$ = useVuelidate(rules, state);\r\n\r\n// On form submission\r\nasync function onSubmit() {\r\n\tconst result = await v$.value.$validate();\r\n\r\n\tif (!result || !state.email || !state.password) {\r\n\t\t// notify user form is invalid\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst auth = getAuth();\r\n\tsignInWithEmailAndPassword(auth, state.email, state.password)\r\n\t\t.then((userCredential) => {\r\n\t\t\tconst user = userCredential.user;\r\n\t\t\tconsole.log(`user: ${user}`);\r\n\t\t})\r\n\t\t.catch((error: FirebaseError) => {\r\n\t\t\tif (error.code === \"auth/invalid-credential\") {\r\n\t\t\t\tstate.errorMessage = \"Invalid credentials\";\r\n\t\t\t} else {\r\n\t\t\t\tonPageError(error);\r\n\t\t\t}\r\n\t\t});\r\n\r\n}\r\n</script>\r\n\r\n<template>\r\n  <!-- Page Content -->\r\n  <div class=\"hero-static d-flex align-items-center\">\r\n    <div class=\"content\">\r\n      <div class=\"row justify-content-center push\">\r\n        <div class=\"col-md-8 col-lg-6 col-xl-4\">\r\n          <!-- Sign In Block -->\r\n          <BaseBlock title=\"Sign In\" class=\"mb-0\">\r\n            <template #options>\r\n              <RouterLink\r\n                :to=\"{ name: 'reminder' }\"\r\n                class=\"btn-block-option fs-sm\"\r\n                >Forgot Password?</RouterLink\r\n              >\r\n              <RouterLink\r\n                :to=\"{ name: 'signup' }\"\r\n                class=\"btn-block-option\"\r\n              >\r\n                <i class=\"fa fa-user-plus\"></i>\r\n              </RouterLink>\r\n            </template>\r\n\r\n            <div class=\"p-sm-3 px-lg-4 px-xxl-5 py-lg-5\">\r\n              <h1 class=\"h2 mb-1\">OneUI</h1>\r\n              <p class=\"fw-medium text-muted\">Welcome, please login.</p>\r\n\r\n              <!-- Sign In Form -->\r\n              <form @submit.prevent=\"onSubmit\">\r\n                <div class=\"py-3\">\r\n                  <div class=\"mb-4\">\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control form-control-alt form-control-lg\"\r\n                      id=\"login-email\"\r\n                      name=\"login-email\"\r\n                      placeholder=\"Email\"\r\n                      :class=\"{\r\n                        'is-invalid': v$.email.$errors.length,\r\n                      }\"\r\n                      v-model=\"state.email\"\r\n                      @blur=\"v$.email.$touch\"\r\n                    />\r\n                    <div\r\n                      v-if=\"v$.email.$errors.length\"\r\n                      class=\"invalid-feedback animated fadeIn\"\r\n                    >\r\n                      Please enter your email\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"mb-4\">\r\n                    <input\r\n                      type=\"password\"\r\n                      class=\"form-control form-control-alt form-control-lg\"\r\n                      id=\"login-password\"\r\n                      name=\"login-password\"\r\n                      placeholder=\"Password\"\r\n                      :class=\"{\r\n                        'is-invalid': v$.password.$errors.length,\r\n                      }\"\r\n                      v-model=\"state.password\"\r\n                      @blur=\"v$.password.$touch\"\r\n                    />\r\n                    <div\r\n                      v-if=\"v$.password.$errors.length\"\r\n                      class=\"invalid-feedback animated fadeIn\"\r\n                    >\r\n                      Please enter your password\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"mb-4\">\r\n                    <div class=\"form-check\">\r\n                      <input\r\n                        class=\"form-check-input\"\r\n                        type=\"checkbox\"\r\n                        value=\"\"\r\n                        id=\"login-remember\"\r\n                        name=\"login-remember\"\r\n                      />\r\n                      <label class=\"form-check-label\" for=\"login-remember\"\r\n                        >Remember Me</label\r\n                      >\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"mb-4\">\r\n                    <button type=\"submit\" class=\"btn w-100 btn-alt-primary\">\r\n                      <i class=\"fa fa-fw fa-sign-in-alt me-1 opacity-50\"></i>\r\n                      Sign In\r\n                    </button>\r\n\t\t\t\t\t<Transition name=\"fade\">\r\n\t\t\t\t\t\t<span v-if=\"state.errorMessage\">{{ state.errorMessage }}</span>\r\n\t\t\t\t\t</Transition>\r\n                </div>\r\n              </form>\r\n              <!-- END Sign In Form -->\r\n            </div>\r\n          </BaseBlock>\r\n          <!-- END Sign In Block -->\r\n        </div>\r\n      </div>\r\n      <div class=\"fs-sm text-muted text-center\">\r\n        <strong>{{ template.app.name + \" \" + template.app.version }}</strong> &copy;\r\n        {{ template.app.copyright }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- END Page Content -->\r\n</template>\r\n"],"names":["template","useTemplateStore","state","reactive","rules","computed","required","email","minLength","v$","useVuelidate","onSubmit","auth","getAuth","signInWithEmailAndPassword","userCredential","user","error","onPageError"],"mappings":"muBAYA,MAAMA,EAAWC,EAAiB,EAG5BC,EAAQC,EAAS,CACtB,MAAO,KACP,SAAU,KACV,aAAc,EAAA,CACd,EAGKC,EAAQC,EAAS,KACf,CACN,MAAO,CACN,SAAAC,EACA,MAAAC,EACA,UAAWC,EAAU,CAAC,CACvB,EACA,SAAU,CACT,SAAAF,EACA,UAAWE,EAAU,CAAC,CAAA,CAExB,EACA,EAGKC,EAAKC,EAAaN,EAAOF,CAAK,EAGpC,eAAeS,GAAW,CAGzB,GAAI,CAFW,MAAMF,EAAG,MAAM,UAAU,GAEzB,CAACP,EAAM,OAAS,CAACA,EAAM,SAErC,OAGD,MAAMU,EAAOC,EAAQ,EACMC,EAAAF,EAAMV,EAAM,MAAOA,EAAM,QAAQ,EAC1D,KAAMa,GAAmB,CACzB,MAAMC,EAAOD,EAAe,KACpB,QAAA,IAAI,SAASC,CAAI,EAAE,CAAA,CAC3B,EACA,MAAOC,GAAyB,CAC5BA,EAAM,OAAS,0BAClBf,EAAM,aAAe,sBAErBgB,EAAYD,CAAK,CAClB,CACA,CAAA"}